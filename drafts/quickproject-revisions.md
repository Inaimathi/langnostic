So in preparation for some [`ribbit`](https://github.com/inaimathi/ribbit)/[`cl-fds`](https://github.com/inaimathi/cl-fds) prototyping I did a little while ago[^which-i-will-write], I also did a [bunch of hacking](https://github.com/inaimathi/quickproject) on [Xach's](https://github.com/xach) pretty decent [`quickproject`](https://github.com/xach/quickproject) library. I've been using it to create project skeletons for Common Lisp for quite a while, but it's unsatisfying in a few ways I thought I'd fix up.

[^which-i-will-write]: Which I will write about soon, I promise. I've got [a draft](https://github.com/inaimathi/langnostic/blob/122cc5d51b80b726233b0739c92ae58d8c201f67/drafts/quickproject-revisions.md) up on Github, but want to refine it for correctness and ease of comprehension before _actually_ publishing it anywhere.

## Its default output is unsatisfactory

In particular, it produces a `README.txt` instead of the `README.md` I'd prefer, it doesn't set up a default `.travis.yml` or `.gitignore`, and it doesn't set up any sort of test harness in the generated `asd` file. It's possible that the reason I find this unsatisfactory is that I've been writing a lot of [Clojure](https://clojure.org/) lately, and the fantastic [`lein`](https://leiningen.org/) utility there takes care of all of this and then some, but I still want the functionality.

## It's hard to change that default output

`quickproject` theoretically has a template-capable subsystem that lets you point it at a directory somewhere and generate from that place instead. Which is a fine thing to have, except that most of its internals are not template based. [There's a specific function](https://github.com/xach/quickproject/blob/a44d324c89a2ac214ace59c9bf339d493c138c30/quickproject.lisp#L75-L79) that outputs the `README.txt` file, which means that even if you work up a template directory with a `README.md`, the `.txt` will be output regardless, and you'll presumably delete it by hand.

Also, because of it's templating approach, it's extremely hard to make an output file named after the project. Which you'd need in order to effectively override the `<your-project>.asd` and `<your-project>.lisp` files generated by default.

## There isn't an easily available example template directory

The template engine used here is [`html-template`](http://weitz.de/html-template/), but `quickproject` messes with the template delimiters somewhat, which means that `html-template` documentation is _almost_ helpful, but doesn't give you something you could cut/paste to work up a new project template. Which isn't a _huge_ deal, but docs are nice, and since `quickproject` is the defacto default Common Lisp project generation tool, it'd be nice if those docs were present and as simple as possible to use.

## Fixing It

[My edits](https://github.com/inaimathi/quickproject) resolve all of the above, and can be found [here](https://github.com/inaimathi/quickproject), just in case I [didn't throw](https://github.com/inaimathi/quickproject) enough [links](https://github.com/inaimathi/quickproject) at you [already](https://github.com/inaimathi/quickproject).

In terms of interface, it's transparent. So if you're used to using `quickproject:make-project` yourself, there are absolutely no changes to internalize from the activation perspective. However

1. There is a [`default-template`](https://github.com/inaimathi/quickproject/tree/master/default-template) directory available that shows you what the base template looks like, and conveniently can be copied out and cut up for your own nefarious purposes.
2. The internals of the library has been modified so that it automatically uses the template directory for everything, including README generation, so that you can easily remove pieces, not just add or replace them
3. The output machinery looks for two specific files named `system.asd` and `application.lisp` which get output as `<your-project>.asd` and `<your-project>.lisp` rather than naively. This lets you generate your projects' `asd` and `lisp` files trivially, at the admitted cost that you can't have files literally named "`system.asd`" and "`application.lisp`" in your project tree.

I've already used [a branch](https://github.com/inaimathi/quickproject/tree/test-integration) of [my version](https://github.com/inaimathi/quickproject) to generate the `cl-fds` project (which includes a generated test harness using [`test-utils`](https://github.com/inaimathi/test-utils), [`quickcheck`](https://github.com/mcandre/cl-quickcheck) and [`prove`](https://github.com/fukamachi/prove/)).

There's an [open PR](https://github.com/xach/quickproject/pull/14), so hopefully, this gets merged into the mainline `quickproject` at some point. Given how busy Xach is, I wouldn't hold my breath, but you can still clone and use mine if you like.
